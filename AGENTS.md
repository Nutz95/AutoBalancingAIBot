<!-- OPENSPEC:START -->
# OpenSpec Instructions

These instructions are for AI assistants working in this project.

Always open `@/openspec/AGENTS.md` when the request:
- Mentions planning or proposals (words like proposal, spec, change, plan)
- Introduces new capabilities, breaking changes, architecture shifts, or big performance/security work
- Sounds ambiguous and you need the authoritative spec before coding


## Language Policy

All code and OpenSpec files (proposals, specs, design, tasks, documentation, etc.) MUST be written in **English** only. This ensures consistency, maintainability, and ease of collaboration for all contributors.

Chat and interactive discussions with the AI assistant may continue in French if desired, but all committed files and code must remain in English.

Use `@/openspec/AGENTS.md` to learn:
- How to create and apply change proposals
- Spec format and conventions
- Project structure and guidelines

Keep this managed block so 'openspec update' can refresh the instructions.

<!-- OPENSPEC:END -->

## Code Formatting Rules

- **Code style enforcement**: All committed code and OpenSpec files MUST follow a readable formatting style. Avoid single-line function bodies, lambdas, or complex statements compressed on one line.
- **Indentation and spacing**: Use consistent indentation (spaces preferred) and place logical spaces around operators for readability.
- **Statement layout**: Place statements on separate lines — end statements with a semicolon and follow with a newline. Do not chain multiple statements on the same line.
- **Braces and blocks**: Use multi-line blocks for functions, control statements, and lambdas. Opening and closing braces should be on their own lines or follow the project's existing brace style consistently.
- **Why**: This improves diffs, code reviews, and automated parsing of specs. The OpenSpec files and code generated/modified by assistants must follow these rules.

Note: These formatting rules augment the Language Policy above and apply to any files changed or generated as part of proposals, specs, or code changes.

## Design Principles (SOLID)

To improve maintainability and ease refactoring, all code and OpenSpec files modified or generated by assistants must follow the SOLID design principles where applicable. Concretely:

- **S — Single Responsibility:** Each module, class, or function should have one clear responsibility. Avoid large functions or multiple responsibilities in the same file; split into smaller, focused files/modules.
- **O — Open/Closed:** Design components to be open for extension but closed for modification. Prefer composition/abstraction over modifying existing logic for new behaviors.
- **L — Liskov Substitution:** Derived types should be substitutable for their base types. Keep interfaces stable and preserve behavioral contracts.
- **I — Interface Segregation:** Prefer multiple specific interfaces to a single large interface. Consumers should not be forced to depend on methods they do not use.
- **D — Dependency Inversion:** Depend on abstractions (interfaces) rather than concrete implementations. Use dependency injection to separate construction from usage where practical.

Practical rules for assistants:

- When adding more than a few hundred lines of code or multiple top-level functions, extract responsibilities into separate files and small modules.
- Avoid adding multiple unrelated helper functions into an existing file; create well-named source/header pairs and update build config as needed.
- Keep OpenSpec and code changes in English and follow the Code Formatting Rules above.

These rules help reviewers and maintainers by reducing monolithic files and making unit testing and refactoring easier.